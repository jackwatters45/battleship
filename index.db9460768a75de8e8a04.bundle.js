(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(a)?a:String(a)),o)}var a}function n(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}var o=new WeakSet,a=function(){function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e(this,t),n(this,o),this.hits=0,this.coordinates=r,this.length=r.length,this.sunk=!1,this.name=a}var a,c;return a=t,(c=[{key:"hit",value:function(){return this.hits+=1,function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,o,i).call(this)}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),t}();function i(){return this.hits===this.length&&(this.sunk=!0,!0)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}function u(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function f(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var d=new WeakSet,h=new WeakSet,p=new WeakSet,y=new WeakSet,b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,y),u(this,p),u(this,h),u(this,d),this.board=f(this,h,v).call(this),this.shipsPlaced=[]}var e,r;return e=t,r=[{key:"placeRandShips",value:function(){var t=this;[{name:"Carrier",length:5},{name:"Battleship",length:4},{name:"Cruiser",length:3},{name:"Submarine",length:3},{name:"Destroyer",length:2}].forEach((function(e){for(var r,n=!1;!n;){var o=Object.keys(t.board)[Math.floor(Math.random()*Object.keys(t.board).length)],a=Math.random()<.5;r=f(t,p,g).call(t,o,a,e.length),Array.isArray(r)&&(n=!0)}f(t,d,m).call(t,r,e.name)})),this._shipsToBePlaced=null}},{key:"userPlaceShip",value:function(t,e,r,n){var o=f(this,p,g).call(this,t,e,r);return!!o&&f(this,d,m).call(this,o,n)}},{key:"receiveAttack",value:function(t){return this.board[t].attacked=!0,!!this.board[t].shipPlaced&&(this.board[t].shipPlaced.hit(),this.board[t].shipPlaced)}},{key:"isAlreadyAttacked",value:function(t){return this.board[t].attacked}},{key:"allShipsSunk",value:function(){var t=!0;return this.shipsPlaced.forEach((function(e){e.sunk||(t=!1)})),t}}],r&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t,e){var r=this,n=new a(t,e);return this.shipsPlaced.push(n),t.forEach((function(t){r.board[t].shipPlaced=n})),n}function v(){var t={};return["A","B","C","D","E","F","G","H","I","J"].forEach((function(e){for(var r=1;r<=10;r+=1)t["".concat(e).concat(r)]={shipPlaced:!1,attacked:!1}})),t}function g(t,e,r){var n,o=["A","B","C","D","E","F","G","H","I","J"],a=function(t){if(Array.isArray(t))return t}(n=t.split(""))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=a[0],c=a.slice(1),l=parseInt(c.reduce((function(t,e){return t+e})),10),u=o.indexOf(i),d=[];if(e)for(var h=l;h<l+r;h+=1){var p="".concat(i).concat(h);if(!f(this,y,S).call(this,p))return!1;d.push(p)}else for(var b=u;b<u+r;b+=1){var m="".concat(o[b]).concat(l);if(!f(this,y,S).call(this,m))return!1;d.push(m)}return d}function S(t){return Object.keys(this.board).includes(t)&&!1===this.board[t].shipPlaced}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.gameBoard=new b,this.moves=[]}var e,r;return e=t,(r=[{key:"setOpponentGameboard",value:function(t){this.opponentGameboard=t}},{key:"attack",value:function(t){return this.moves.push({coordinate:t,coordinateData:this.opponentGameboard.board[t]}),this.opponentGameboard.receiveAttack(t)}}])&&k(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function C(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return L(t)}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function G(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function q(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var x=new WeakSet,B=new WeakSet,I=new WeakSet,D=new WeakSet,H=new WeakSet,M=new WeakSet,W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(i,t);var e,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(o){var r=T(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return C(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),G(L(t=a.call(this,"Computer")),M),G(L(t),H),G(L(t),D),G(L(t),I),G(L(t),B),G(L(t),x),t.search={searching:!1,coordinate:null},t}return e=i,(r=[{key:"randomAttack",value:function(){if(!this.moves.length)return this.attack(q(this,M,U).call(this));var t=this.moves[this.moves.length-1];if(!this.search.searching){if(!t.coordinateData.shipPlaced)return this.attack(q(this,M,U).call(this));q(this,x,z).call(this,"above",t.coordinate)}if(t.coordinateData.shipPlaced.sunk){var e=q(this,I,R).call(this);if(!e)return q(this,x,z).call(this),this.attack(q(this,M,U).call(this));q(this,x,z).call(this,"above",e)}if(t.coordinateData.shipPlaced&&!t.coordinateData.shipPlaced.sunk){var r=q(this,H,F).call(this,t.coordinate);return this.attack(r)}var n=q(this,D,J).call(this,this.search.coordinate);return this.attack(n)}}])&&P(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(j);function z(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.search={searching:t,coordinate:e}}function _(){var t=["above","below","left","right"],e=t.indexOf(this.search.searching)+1;this.search.searching=t[e]}function R(){for(var t=0,e=Object.keys(this.opponentGameboard.board);t<e.length;t++){var r=e[t];if(this.opponentGameboard.board[r].attacked&&this.opponentGameboard.board[r].shipPlaced&&!this.opponentGameboard.board[r].shipPlaced.sunk)return r}return!1}function J(t){return q(this,B,_).call(this),q(this,H,F).call(this,t)}function F(t){var e,r,n=["A","B","C","D","E","F","G","H","I","J"],o=function(t){if(Array.isArray(t))return t}(r=t.split(""))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=o[0],i=o.slice(1),c=n.indexOf(a);switch(this.search.searching){case"above":if(e="".concat(n[c-1]).concat(i),Object.keys(this.opponentGameboard.board).includes(e)&&!this.opponentGameboard.board[e].attacked)return this.search.searching="above",e;case"below":if(e="".concat(n[c+1]).concat(i),Object.keys(this.opponentGameboard.board).includes(e)&&!this.opponentGameboard.board[e].attacked)return this.search.searching="below",e;case"left":if(e="".concat(a).concat(parseInt(i,10)-1),Object.keys(this.opponentGameboard.board).includes(e)&&!this.opponentGameboard.board[e].attacked)return this.search.searching="left",e;case"right":if(e="".concat(a).concat(parseInt(i,10)+1),Object.keys(this.opponentGameboard.board).includes(e)&&!this.opponentGameboard.board[e].attacked)return this.search.searching="right",e;default:return this.search.coordinate===t?q(this,D,J).call(this,this.moves[this.moves.length-1].coordinate):q(this,D,J).call(this,this.search.coordinate)}}function U(){for(var t=!1;!t;){var e=Object.keys(this.opponentGameboard.board),r=Math.floor(e.length*Math.random()),n=e[r];this.opponentGameboard.board[e[r]].attacked||(t=n)}return t}const N=function(t,e){Object.keys(t.board).forEach((function(t){var r=document.createElement("div");r.classList.add("".concat(e.classList,"-box")),r.id=t,r.title=t,e.appendChild(r)}))},$=function(t,e){var r=e.parentElement.className;t.coordinates.forEach((function(t){document.querySelector(".".concat(r,"-box#").concat(t)).style.backgroundColor="#9b9494"}))},X=function(t,e){t?(e.innerHTML="x",e.style.backgroundColor="#F87171"):(e.innerHTML="•",e.style.backgroundColor="rgb(250, 248, 239, .5)")},Y=function(t){var e=document.querySelectorAll(".overlay"),r=e[0],n=r.firstElementChild,o=e[1],a=o.firstElementChild;return n.textContent="Gameover!",a.textContent=" ".concat(t.name," wins!"),r.classList.remove("hidden"),o.classList.remove("hidden"),!1};function K(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Q(t,e){if(t){if("string"==typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z(t){if(Array.isArray(t))return t}var tt=function(t){var e=t.pageX-t.currentTarget.offsetLeft,r=t.pageY-t.currentTarget.offsetTop,n=!!t.target.classList[1],o=n?e/36.5:r/36.5;o=Math.floor(o);var a={id:t.target.id,isHorizontal:n,draggedCell:o};t.dataTransfer.setData("text/plain",JSON.stringify(a))},et=function(t){var e,r,n=t.target.id,o=JSON.parse(t.dataTransfer.getData("text/plain")),a=document.querySelector("#".concat(o.id)),i=a.childElementCount,c=function(t,e,r,n){var o,a=["A","B","C","D","E","F","G","H","I","J"],i=Z(o=r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||Q(o)||K(),c=i[0],s=i.slice(1);s=parseInt(s.join(""),10);var l=a.indexOf(c);t?s-=e:c=a[l-=e];var u,f,d=!!(a.includes(c)&&s>=1&&s<=10)&&"".concat(c).concat(s);return t?(u=s+n-1,f=c):(f=a[l+n-1],u=s),[d,!!(a.includes(f)&&u>=1&&u<=10)&&"".concat(f).concat(u)]}(o.isHorizontal,o.draggedCell,n,i),s=(r=2,Z(e=c)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,r)||Q(e,r)||K()),l=s[0],u=s[1];if(l&&u)return{start:l,isHorizontal:o.isHorizontal,length:i,name:o.id.charAt(0).toUpperCase()+o.id.slice(1),ship:a}},rt=document.querySelector(".left-board"),nt=document.querySelector(".right-board"),ot=document.querySelectorAll(".ship");document.querySelector(".restart").addEventListener("click",(function(){return it()})),document.querySelector(".orientation").addEventListener("click",(function(){document.querySelector(".ships").classList.toggle("vertical-orientation"),document.querySelectorAll(".ship").forEach((function(t){t.classList.toggle("horizontal")}))}));var at=document.querySelector(".ships-container"),it=function(){!function(t,e){var r,n,o,a,i,c=document.querySelector("#left.overlay"),s=document.querySelector("#right.overlay"),l=document.querySelector(".ships-container");s.classList.add("hidden"),c.classList.add("hidden"),t.innerHTML="",e.innerHTML="",l.classList.remove("hidden"),r=document.querySelector("#carrier"),n=document.querySelector("#battleship"),o=document.querySelector("#cruiser"),a=document.querySelector("#submarine"),i=document.querySelector("#destroyer"),r.classList.remove("hidden"),n.classList.remove("hidden"),o.classList.remove("hidden"),a.classList.remove("hidden"),i.classList.remove("hidden")}(rt,nt);var t=new j("User"),e=new W;t.setOpponentGameboard(e.gameBoard),e.setOpponentGameboard(t.gameBoard),N(t.gameBoard,rt),N(e.gameBoard,nt),e.gameBoard.placeRandShips(),st(t,e)},ct=function(t){var e=t.randomAttack(),r=t.moves[t.moves.length-1].coordinate,n=document.querySelector(".left-board-box#".concat(r));X(e,n),e.sunk&&($(e,n),t.opponentGameboard.allShipsSunk()&&Y(t))},st=function(t,e){var r=document.querySelectorAll(".left-board-box");ot.forEach((function(t){return t.addEventListener("dragstart",tt)})),r.forEach((function(r){r.addEventListener("dragover",(function(t){return t.preventDefault()})),r.addEventListener("dragenter",(function(t){return t.preventDefault()})),r.addEventListener("drop",(function(r){var n,o,a=et(r);a&&(t.gameBoard.userPlaceShip(a.start,a.isHorizontal,a.length,a.name)&&(n=t.gameBoard.shipsPlaced,o=rt,n.forEach((function(t){var e={Carrier:"#edd073",Battleship:"#f75f3b",Cruiser:"#f77c5f",Submarine:"#f69664",Destroyer:"#f3b27a"}[t.name];t.coordinates.forEach((function(r){var n=document.querySelector(".".concat(o.className," #").concat(r));n.style.backgroundColor=e,n.style.border="solid 1px #776e65",n.classList.add(t.name)}))})),a.ship.classList.add("hidden")),5===t.gameBoard.shipsPlaced.length&&(at.classList.add("hidden"),function(t,e){document.querySelectorAll(".right-board-box").forEach((function(r){return r.addEventListener("click",(function(){(function(t,e){if(!e.opponentGameboard.isAlreadyAttacked(t.id)){var r=e.attack(t.id);return X(r,t),!r.sunk||($(r,t),!e.opponentGameboard.allShipsSunk())||Y(e)}return!1})(r,t)&&setTimeout(ct,200,e)}))}))}(t,e)))}))}))};it()})();